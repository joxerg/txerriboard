"use strict";!function(e){var o={config:{logStyle:{info:"background-color: #676460; color: #fff; padding: 2px 6px;",serviceWorker:"background-color: #6100e0; color: #fff; padding: 2px 6px;",webaudio:"background-color: #e000b7; color: #fff; padding: 2px 6px;"}},version:"0.2.12",volume:0,_init:function(){console.log("%c -- Noise Machine "+o.version+" --",o.config.logStyle.info),o.burgerElm=document.getElementsByClassName("js-burger")[0],o.headerMenuElm=document.getElementsByClassName("js-menu")[0],o.optionsElm=document.getElementsByClassName("js-options")[0],o.playElm=document.getElementsByClassName("js-play")[0],o.volumeSliderElm=document.getElementsByClassName("js-volume-input")[0];try{e.AudioContext=e.AudioContext||e.webkitAudioContext,o.audioContext=new AudioContext}catch(e){alert("Web Audio API is not supported in this browser")}o.burgerElm.addEventListener("pointerdown",o._toggleMenuButton),o.optionsElm.addEventListener("pointerend",o._toggleMenuButton),o.playElm.addEventListener("pointerdown",o._play),o.volumeSliderElm.addEventListener("change",o._setVolume),e.addEventListener("resize",o._addBodyClasses),o._addBodyClasses(),o._registerServiceWorker()},_addBodyClasses:function(){var o=document.documentElement;e.innerWidth<768?o.classList.add("is-mobile-device"):o.classList.remove("is-mobile-device")},_toggleMenuButton:function(e){e.preventDefault(),e.stopImmediatePropagation(),e.target!==o.burgerElm||o.headerMenuElm.classList.contains("header__menu--show")?e.target===o.burgerElm&&o.headerMenuElm.classList.contains("header__menu--show")&&(o.headerMenuElm.classList.remove("header__menu--show"),o.burgerElm.innerText="Menu"):(o.headerMenuElm.classList.add("header__menu--show"),o.burgerElm.innerText="Close")},_makeBrownNoise:function(){o.audioContext.close(),o.audioContext=new AudioContext;var e,n;(e=0,(n=o.audioContext.createScriptProcessor(4096,1,1)).onaudioprocess=function(n){for(var t=n.outputBuffer.getChannelData(0),i=0;i<4096;i++){var s=2*Math.random()-1;t[i]=(e+.02*s)/1.02,e=t[i],t[i]*=o.volume}},console.log("%cWebAudio: generating brown noise at "+o.volume+" gain",o.config.logStyle.webaudio),n).connect(o.audioContext.destination)},_play:function(){o.playElm.classList.contains("options__play--playing")?o.playElm.classList.contains("options__play--playing")&&o.audioContext.suspend().then(function(){o.playElm.classList.remove("options__play--playing"),o.volumeSliderElm.classList.remove("options__volume--playing"),o.playElm.innerText="eman",console.log("%cWebAudio: stopping playback",o.config.logStyle.webaudio)}):o.audioContext.resume().then(function(){o.playElm.classList.add("options__play--playing"),o.volumeSliderElm.classList.add("options__volume--playing"),o.playElm.innerText="nahikoa",o._makeBrownNoise()})},_registerServiceWorker:function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").catch(function(e){console.error("SW registration failed: ",e)})},_setVolume:function(){o.volume=o.volumeSliderElm.value}};"AudioContext"in e||"webkitAudioContext"in e?e.addEventListener("DOMContentLoaded",o._init):alert("Web Audio API not supported in this browser")}(window);
//# sourceMappingURL=all.min.js.map
